# MAC地址与IP地址

## MAC地址

MAC地址应用在OSI参考模型第二层，即数据链路层。  

MAC地址是以太网节点的物理接口，由6个字节组成。MAC地址必须满足相同网关下的全局唯一性。六个字节的组成为：前三个字节为制造商代码，后三个字节代表设备地址。  

## IP地址

IP地址用于OSI参考模型第三次，即网络层，用于各种ip相关协议。  

IP地址目前又分为ipv4和ipv6。  

ipv4是指第四代ip协议，由32位二进制数组成，为方便书写，将每8位转换成十进制书写，使用`.`分隔，如`192.168.10.100`。  

ipv6是第六代ip协议，由128位二进制数组成，每4位写作一个16进制数，每4个16进制数写作一组，用`:`分隔，且当出现多组0时，使用`::`代替这些0以及两侧的`:`，如`fe80::4db4:9558:9c8d:5adc`  

IP地址一般由两部分组成，网络位和主机位，网络位表示这个ip地址属于哪一个网络，主机位表示这个地址属于该网络中的哪一个主机。  

### IPv4

在互联网设计初期，由于各地区人口、网络设备数量不同，为了便于网络管理和设计，如溯源地址、合理利用ip地址可用数量等，IPv4 地址被划分为 **A、B、C、D、E 五类地址**，每一类的网络段和主机段位数不同，从A到E主机段逐渐减少、网络段逐渐增加。主机段位数越长，总的可分配ip就越多，就越适合人口密集或设备数目多的地区或组织。  

下面是各类地址的含义和范围：

**A类地址**：  

* **范围（首字节）：** `1.0.0.0` \~ `126.255.255.255`
* **首字节范围（十进制）：** `1` \~ `126`
* **网络位数 / 主机位数：** 网络号 8 位，主机号 24 位
* **默认子网掩码：** `255.0.0.0`
* **可用网络数量：** $2^7 - 2 = 126$ 个网络（0 和 127 特殊用途）
* **每个网络最多支持主机数：** $2^{24} - 2 = 16,777,214$

**B类地址**：  

* **范围（首字节）：** `128.0.0.0` \~ `191.255.255.255`
* **首字节范围：** `128` \~ `191`
* **网络位数 / 主机位数：** 网络号 16 位，主机号 16 位
* **默认子网掩码：** `255.255.0.0`
* **可用网络数量：** $2^{14} = 16,384$
* **每个网络最多支持主机数：** $2^{16} - 2 = 65,534$

**C类地址**：  

* **范围（首字节）：** `192.0.0.0` \~ `223.255.255.255`
* **首字节范围：** `192` \~ `223`
* **网络位数 / 主机位数：** 网络号 24 位，主机号 8 位
* **默认子网掩码：** `255.255.255.0`
* **可用网络数量：** $2^{21} = 2,097,152$
* **每个网络最多支持主机数：** $2^8 - 2 = 254$

**D类地址**（多播地址）  

* **范围：** `224.0.0.0` \~ `239.255.255.255`
* **首字节范围：** `224` \~ `239`
* **用途：** 用于 **多播（Multicast）**，不用于普通主机通信


**E类地址**（保留地址）  

* **范围：** `240.0.0.0` \~ `255.255.255.255`
* **首字节范围：** `240` \~ `255`
* **用途：** 保留作科研、实验用途，目前未正式使用


**特殊地址**：  

* `127.0.0.0/8` 是 **环回地址（loopback）**，通常使用 `127.0.0.1` 表示本地机器。
* `0.0.0.0` 代表本机的未知地址（如绑定所有 IP）。
* 每类地址的第一个和最后一个地址保留为网络地址和广播地址，因此主机数量要减去 2。

目前的ipv4网络已经不采用A、B、C类等类地址了，而是采用了一种称为 **无类域间路由Classless Inter-Domain Routing（CIDR）** 技术，这个技术能更灵活地分配ip地址范围。  

### 保留地址

网络之间可以是嵌套关系，即一个网络下可以存在一个子网，子网可以与广域网分离开来。  

对于ipv4，规定以下ip地址保留给子网或者内网，可自行管理与分配：  
| 类别  | 私有地址范围                            | 子网掩码                | 网络规模   |
| --- | --------------------------------- | ------------------- | ------ |
| A 类 | `10.0.0.0` – `10.255.255.255`     | `255.0.0.0` (/8)    | 超大型私有网 |
| B 类 | `172.16.0.0` – `172.31.255.255`   | `255.240.0.0` (/12) | 中大型私有网 |
| C 类 | `192.168.0.0` – `192.168.255.255` | `255.255.0.0` (/16) | 小型私有网  |

### 广播地址

如果某个主机向这个地址发送了消息，等同于向所有ip发送消息，顾名思义，称为广播地址。  

ipv4下为主机段全为1的地址，如`192.168.0.0`~`192.168.0.255`网络段下的`192.168.0.255`，这就是一个广播地址。  

### 网段地址

即表示同一网段的地址，将主机地址位全写作0，即为网段地址，如`192.168.0.0`。  

## 子网掩码

子网掩码这个词可以“望文生义”，所谓子网，即同一个局域网；所谓掩，就是掩盖不想要的，只保留想要的；而所谓码，就是数码。  

综上，子网掩码就是某数码码，可以用这串数码来判断两个主机是否在同一个网络或者子网络。  

### IPv4子网掩码

ipv4下的子网掩码这样书写：`255.255.255.0`或者`/24`。  

上述掩码做了这样一个判断，将主机ip二进制数和上述掩码`255.255.255.0`做按位与运算，如果两个主机经过上述运算结果相同，那么两个主机就在同一子网下，即前24为ip相同的主机在同一网络下，故规定可以简写成`/24`。在CIDR技术下，子网掩码十分自由，可以写成`/12`、`/23`、`/25`等多种合法形式，而在CIDR技术之前，只能写成`/8`、`/16`、`/24`。  

#### IPv6子网掩码

和IPv4的子网掩码一样，不过不适用`/24`这种形式，而是`%24`。  

## 网段

子网掩码和ip地址的组合可以表示一个网络段，简称为网段。这里以ipv4为例。  

如`192.168.10.0/24`表示ip`192.168.10.0`~`192.168.10.255`。  
